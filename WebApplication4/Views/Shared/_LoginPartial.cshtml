@using Microsoft.AspNet.Identity
@using WebApplication4.Models
@if (Request.IsAuthenticated)
{<div>
        @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", @class = "form-inline mt-2 mt-md-0" }))
        {
            @Html.AntiForgeryToken()

            <ul class="navbar-nav">
                <li class="nav-item notifications-nav">
                    <img class="navbar-symbol" src="~/Content/images/notification-symbol.svg" />
                    @{ var notifications = Session["notifications"] != null ? (List<Notification>)Session["notifications"] : null;}

                    <span class="badge badge-danger" style="@if (notifications == null ||notifications.Count() == 0 ) {<text>display:none;</text> }">
                        @if (notifications != null)
                        {
                            <text>@notifications.Count</text>

                        }
                    </span>
                    <div class="notifications-container">
                        <div class="notifications-list">
                            @if (notifications != null)
                            {
                                foreach (var notification in notifications)
                                {
                                    <a id="@notification.Id" href="@notification.Link"><div class="notification-item">@notification.NotificationMessage</div></a>
                                }
                            }
                        </div>
                        <div class="notifications-message"><a href="/notifications">See all notifications</a></div>
                    </div>
                </li>
                <li class="nav-item">
                    <img class="navbar-symbol" src="~/Content/images/friend-request-symbol.svg" /><span class="badge badge-danger">4</span>
                </li>
                <li class="nav-item">
                    <img class="navbar-symbol" src="~/Content/images/message-symbol.svg" /><span class="badge badge-danger">4</span>
                </li>
                <li>
                    @Html.ActionLink("Hello " + @Session["userName"] + "!", "Index", "Manage", routeValues: null, htmlAttributes: new { title = "Manage", @class = "nav-link" })
                </li>
                <li>
                    <a class="nav-link" href="javascript:document.getElementById('logoutForm').submit()">Log off</a>
                </li>
            </ul>
        }
    </div>
}
else
{
    <ul class="nav navbar-nav navbar-right">
        <li>@Html.ActionLink("Register", "Register", "Account", routeValues: null, htmlAttributes: new { id = "registerLink" })</li>
        <li>@Html.ActionLink("Log in", "Login", "Account", routeValues: null, htmlAttributes: new { id = "loginLink" })</li>
    </ul>
}
